---
title: Hexo博客迁移到其他电脑
date: 2018-08-03 14:14:00
tags: 博客迁移
categories: hexo
---

## 安装hexo博客必要的软件
下载安装Git客户端
安装node js

## Github添加新电脑生成的密钥
打开git bash输入如下命令：
```bash
ssh-keygen -t rsa -C "xxxxx@163.com"
```
<!--more-->
邮箱为GitHub注册邮箱，输入命令后直接回车，生成密钥对。根据提示找到密钥对所在位置，将id_rsa.pub公钥内容复制粘贴到Github-settings-'SSH and GPG keys'-'SSH keys'中。
使用`ssh -T git@github.com`测试公钥是否添加成功
![](2018-08-03-Hexo博客迁移到其他电脑\公钥测试.png)

## 备份原文件
需要转移的文件有：

|文件(夹) | 说明|
| ----------- | -------------------- |
| scaffolds/   | 博客文章模板         |
| source/      | 所有的博客文章       |
| themes/      | 网站主题             |
| .gitignore   | push时需忽略的文件   |
| _config.yml  | 站点配置文件         |
| package.json | 依赖包的名称和版本号 |

由于配置文件和主题文件需要经常更改，采用github创建博客分支的方式进行备份。

## 创建分支
克隆github上上生成的静态文件到hexo文件夹中
```bash
git clone https://github.com/yourname/xxxx.github.io.git hexo
```
克隆后将除.git文件外其他所有文件删除。主要是为了得到版本管理文件夹.git。
**.git文件为隐藏文件，可直接将可见文件全部删除**

将备份的原文件复制到此文件夹。若文件夹是从github克隆，则需要删除主题文件中的版本控制文件夹,以next主题为例：
```bash
$ rm -rf thems/next/.git*
```

创建名为hexo的分支
```bash
$ git checkout -b hexo
```
保存所有文件到暂存区
```bash
$ git add --all
```
提交变更
```bash
$ git commit -m "hexo-2"
```
提交变更时报错：
![](2018-08-03-Hexo博客迁移到其他电脑\git_config.png)
根据提示配置。

推送分支到github,并用--set-upstream与origin创建关联，将hexo设置为默认分支
```bash
$ git push --set-upstream origin hexo
```

## 迁移
以后在其他电脑上写博客，直接将分支克隆下来。再使用npm install安装依赖。
```
$ git clone -b hexo https://github.com/yourname/xxx.github.io.git
$ npm install
```

## 发表文章
新建文章
```
hexo n "xxx"
```
注意：需要使用git push把源文件推到分支上
```
$ git add .
$ git commit -m "xxxx"
$ git push origin hexo
```
部署文章：
```
hexo d -g
```

## 参考
[【GitHub】创建Git分支将Hexo博客迁移到其它电脑
](https://blog.csdn.net/white_idiot/article/details/80685990)
